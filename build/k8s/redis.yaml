apiVersion: apps/v1
kind: Deployment
metadata:
  name: redis-deployment        # 部署的名称
  namespace: rwp
  labels:
    app: redis                  # 标签，用于选择器和管理
spec:
  replicas: 1                   # 副本数量，表示运行一个 Redis 实例
  selector:
    matchLabels:
      app: redis                # 选择器，用于匹配 Pod
  template:
    metadata:
      labels:
        app: redis              # Pod 的标签
    spec:
      containers:
        - name: redis             # 容器名称
          image: redis:latest     # 使用的 Redis 镜像
          ports:
            - containerPort: 6379    # Redis 默认端口
          env:
            - name: REDIS_PASSWORD   # 设置 Redis 密码环境变量
              value: "123456"    # 替换为你的密码
---
apiVersion: v1
kind: Service
metadata:
  name: redis-service            # 服务的名称
  namespace: rwp
spec:
  type: NodePort
  ports:
    - port: 6379                   # 服务端口
      targetPort: 6379             # 目标容器端口
  selector:
    app: redis                   # 选择器，用于选择与服务关联的 Pod
